<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á</title>
    <style>
        .navbar {
            display: flex;
            align-items: center;
            background-color: #D2B48C;
            padding: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .navbar h1 {
            margin-right: auto;
            font-size: 24px;
        }
        
        .navbar form {
            margin: 0 10px;
        }
        
        .navbar button {
            padding: 8px 16px;
            cursor: pointer;
            background-color: #f8f8f8;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        
        .navbar button:hover {
            background-color: #e7e7e7;
        }
        
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            background: linear-gradient(to bottom, #F5DEB3, #FFFFFF);
            color: #333;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .task-card {
            background: white;
            padding: 10px;
            margin: 5px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            max-width: 600px;
        }
        
        .task-actions {
            display: flex;  /* –í—ã—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –¥–æ—á–µ—Ä–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤ –æ–¥–Ω—É –ª–∏–Ω–∏—é */ 
            align-items: center; /* –í—ã—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
        }
        
        .task-actions form {
            margin: 0 5px; /* –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–µ–±–æ–ª—å—à–æ–π –æ—Ç—Å—Ç—É–ø –º–µ–∂–¥—É —Ñ–æ—Ä–º–∞–º–∏ */
        }
        
        .task-actions button {
            background-color: #f0f0f0; 
            border: 1px solid #ccc; 
            padding: 5px 10px; 
            border-radius: 4px; 
            cursor: pointer; 
            transition: background-color 0.3s; 
        }
        
        .task-actions button:hover {
            background-color: #e0e0e0; /* –¶–≤–µ—Ç —Ñ–æ–Ω–∞ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
        }
        
        ul {
            list-style-type: none;
            padding: 0;
        }
    </style>
</head>
<body>
    <div class="navbar">
        <h1>Task Management</h1>
        <form action="{% url 'task_create' %}" method="get">
            <button type="submit">–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É</button>
        </form>
        <form action="{% url 'tasks_list' %}" method="get">
            <button type="submit">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á</button>
        </form>
        <form action="{% url 'logout' %}" method='post'>
            {% csrf_token %}
            <button type='submit'>–í—ã–π—Ç–∏ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è</button>
        </form>
    </div>
    
    <ul>
        {% if tasks %}
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <h2>  –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –Ω–∞ –¥–µ–Ω—å</h2>
            <div>
                <button onclick="location.href='?sort=priority&order=asc'">–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É ‚Üë</button>
                <button onclick="location.href='?sort=priority&order=desc'">–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É ‚Üì</button>
                <button onclick="location.href='?sort=due_date&order=asc'">–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –¥–∞—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è ‚Üë</button>
                <button onclick="location.href='?sort=due_date&order=desc'">–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –¥–∞—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è ‚Üì</button>
                <button onclick="location.href='?sort=status&order=asc'">–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —Å—Ç–∞—Ç—É—Å—É ‚Üë</button>
                <button onclick="location.href='?sort=status&order=desc'">–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —Å—Ç–∞—Ç—É—Å—É ‚Üì</button>
            </div>
            
        </div>
            <ul>
                {% if tasks %}
                    {% for task in tasks %}
                        <li class="task-card">
                            <p><strong>{{ task.title }}</strong> | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç - {{ task.get_priority_display }} | –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏ - {{ task.get_status_display }}</p>
                            <p> –î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ - {{ task.due_date }}</p>
                            <div class="task-actions">
                                <form action="{% url 'task_update' task.pk %}" method="get">
                                    <button type="submit">‚úèÔ∏è</button>
                                </form>
                                <form action="{% url 'task_delete' task.pk %}" method="post">
                                    {% csrf_token %}
                                    <button type="submit" onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –∑–∞–¥–∞—á—É?');">üóëÔ∏è</button>
                                </form>
                            </div>
                        </li>
                    {% endfor %}
                {% else %}
                    <h1>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–¥–∞—á. –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ—é –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É!</h1>
                    <form action="{% url 'task_create' %}" method="get">
                        <button type="submit">–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É</button>
                    </form>
                {% endif %}
            </ul>
        {% else %}
            <h1 align="center">–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –Ω–∞ –¥–µ–Ω—å</h1>
            <h2>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–¥–∞—á. –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ—é –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É!</h2>
            <form action="{% url 'task_create' %}" method="get">
                <button type="submit">–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É</button>
            </form>
        {% endif %}  
    </ul>
</body>
</html>
